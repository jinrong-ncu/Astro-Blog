---
import { ClientRouter } from "astro:transitions";
import ThemeToggle from "../components/ThemeToggle";

interface Props {
  title: string;
  description?: string;
}

const { title, description = "A minimalist personal tech blog." } = Astro.props;
---

<!doctype html>
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content={description} />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>
    <ClientRouter />

    <script is:inline>
      const getTheme = () => {
        if (
          typeof localStorage !== "undefined" &&
          localStorage.getItem("theme")
        ) {
          return localStorage.getItem("theme");
        }
        if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
          return "dark";
        }
        return "light";
      };

      const theme = getTheme();
      if (theme === "dark") {
        document.documentElement.classList.add("dark");
      } else {
        document.documentElement.classList.remove("dark");
      }

      document.addEventListener("astro:after-swap", () => {
        const theme = getTheme();
        if (theme === "dark") {
          document.documentElement.classList.add("dark");
        } else {
          document.documentElement.classList.remove("dark");
        }
      });
    </script>
  </head>
  <body
    class="flex flex-col min-h-screen selection:bg-purple-100 selection:text-purple-900 dark:selection:bg-purple-900/30 dark:selection:text-purple-200"
  >
    <header
      class="sticky top-0 z-50 w-full border-b border-zinc-200/40 dark:border-zinc-800/40 bg-white/80 dark:bg-zinc-950/80 backdrop-blur-md supports-[backdrop-filter]:bg-white/60 dark:supports-[backdrop-filter]:bg-zinc-950/60 transition-colors"
    >
      <nav
        class="flex h-16 items-center justify-between px-6 max-w-5xl mx-auto"
      >
        <a href="/" class="flex items-center gap-2 group">
          <div
            class="p-1.5 bg-zinc-900 dark:bg-white rounded-lg group-hover:bg-zinc-800 dark:group-hover:bg-zinc-200 transition-colors"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="text-white dark:text-zinc-900"
              ><path d="m18 16 4-4-4-4"></path><path d="m6 8-4 4 4 4"
              ></path><path d="m14.5 4-5 16"></path></svg
            >
          </div>
          <span class="font-bold text-zinc-900 dark:text-white tracking-tight"
            >Antigravity</span
          >
        </a>
        <div
          class="flex items-center gap-6 text-sm font-medium text-zinc-500 dark:text-zinc-400"
        >
          <a
            href="/"
            class="hover:text-zinc-900 dark:hover:text-zinc-100 transition-colors"
            >Blog</a
          >
          <a
            href="#"
            class="hover:text-zinc-900 dark:hover:text-zinc-100 transition-colors"
            >Projects</a
          >
          <a
            href="#"
            class="hover:text-zinc-900 dark:hover:text-zinc-100 transition-colors"
            >About</a
          >
          <ThemeToggle client:load />
          <!-- <ThemeToggle client:only="react" /> -->
        </div>
      </nav>
    </header>

    <main class="flex-grow w-full max-w-5xl mx-auto px-6 py-12">
      <slot />
    </main>

    <footer
      class="border-t border-zinc-100 dark:border-zinc-800 bg-white dark:bg-zinc-950 py-8 mt-12 transition-colors"
    >
      <div
        class="max-w-5xl mx-auto px-6 flex justify-between items-center text-sm text-zinc-400 dark:text-zinc-500"
      >
        <p>
          &copy; {new Date().getFullYear()} Antigravity. All rights reserved.
        </p>
        <div class="flex gap-4">
          <a
            href="https://github.com"
            target="_blank"
            rel="noopener noreferrer"
            class="hover:text-zinc-900 dark:hover:text-zinc-100 transition-colors"
            >GitHub</a
          >
          <a
            href="https://twitter.com"
            target="_blank"
            rel="noopener noreferrer"
            class="hover:text-zinc-900 dark:hover:text-zinc-100 transition-colors"
            >Twitter</a
          >
        </div>
      </div>
    </footer>
  </body>
</html>
